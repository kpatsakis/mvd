static void mipsnet_ioport_write(void *opaque, hwaddr uint64_t val, unsigned int size) MIPSnetState * s = opaque ; addr &= 0x3f; switch ( addr )  if ( val & MIPSNET_INTCTL_TXDONE )  if ( val & MIPSNET_INTCTL_RXDONE )  if ( val & MIPSNET_INTCTL_TESTBIT )  mipsnet_reset ( s ); static void mipsnet_reset(MIPSnetState *s) s -> busy = 1; s -> rx_count = 0; s -> rx_read = 0; s -> tx_count = 0; s -> tx_written = 0; s -> intctl = 0; memset ( s -> rx_buffer , 0 , MAX_ETH_FRAME_SIZE ); memset ( s -> tx_buffer , 0 , MAX_ETH_FRAME_SIZE ); 