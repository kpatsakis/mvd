int main(int argc, char **argv) char msg [ LOG_LINE_LENGTH ] = "Format string test: [<%x %x %x %x>]\n" ; int msglen = strlen ( msg ) ; LogLine ( msg , msglen ); static void LogLine(char *ptr, int len) while ( len > 0 )  if ( space == 0 )  * line = 0; fprintf ( stderr , "\tLine: %s\n" , line ); delta = copyin ( line , space , ptr , len , "\n[%" ); static int copyin( char *line,      int const char *ptr, int const char *delim ) count = len < space ? len : space; for(i=0; i<count && !strchr(delim, *ptr); i++ ) line += delta; ptr += delta; space -= delta; len -= delta; if ( space == 0 || len == 0 )  if ( * ptr == '\n' )  * line ++ = * ptr ++; space -= 1; len -= 1; * line = 0; if ( * ptr == '[' )  * line ++ = * ptr ++; space -= 1; len -= 1; if ( * ptr == '%' )  while ( len && * ptr == '%' )  * line ++ = * ptr ++; space -= 1; len -= 1; delta ++; if ( delta % 2 )  if ( space )  * line ++ = '%'; space -= 1; * line ++ = '\0'; if ( * ptr != '<' )  sym_start = line; * line ++ = * ptr ++; space -= 1; len -= 1; delta = copyin ( line , space , ptr , len , ">\n[" ); static int copyin( char *line,      int const char *ptr, int const char *delim ) count = len < space ? len : space; line += delta; ptr += delta; space -= delta; len -= delta; if ( space == 0 || len == 0 )  if ( * ptr != '>' )  * line ++ = * ptr ++; space -= 1; len -= 1; if ( * ptr != ']' )  * ( line - 1 ) = 0; value = strtoul ( sym_start + 1 , ( char * * ) 0 , 16 ); * ( line - 1 ) = '>'; sym_space = space + ( line - sym_start ); if ( sym_space < strlen ( symbol ) + 30 )  delta = sprintf ( sym_start , "%s+%d/%d]" , symbol , sym . offset , sym . size ); space = sym_space + delta; line = sym_start + delta; ptr ++; len --; 